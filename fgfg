local Players = game:GetService("Players")
local TeleportService = game:GetService("TeleportService")
local player = Players.LocalPlayer
local placeId = game.PlaceId

local messages = {
    "–ü—Ä–æ–¥–∞–º Godly –¥–µ—à–µ–≤–æ –∑–∞ –≥—Ä–Ω. –ü–∏—à–∏: Hexon_Shop",
    "Godly –∑–∞ –≥—Ä–∏–≤–Ω—ã. –ë—ã—Å—Ç—Ä–æ. Hexon_Shop",
    "–ö—É–ø–∏—Ç—å Godly –Ω–µ–¥–æ—Ä–æ–≥–æ. –û–ø–ª–∞—Ç–∞ –≥—Ä–Ω. Hexon_Shop",
    "–ï—Å—Ç—å Godly –ø–æ –≤—ã–≥–æ–¥–Ω–æ–π —Ü–µ–Ω–µ –≤ –≥—Ä–Ω. Hexon_Shop",
    "Godly –¥–ª—è —Ç—Ä–µ–π–¥–∞ –∑–∞ –≥—Ä–∏–≤–Ω—ã. Hexon_Shop",
    "–î–µ—à–µ–≤—ã–π Godly –∑–∞ –≥—Ä–Ω. –ü–∏—à–∏: Hexon_Shop",
    "–ü—Ä–æ–¥–∞–∂–∞ Godly. –û–ø–ª–∞—Ç–∞ –≤ –≥—Ä–∏–≤–Ω–∞—Ö. Hexon_Shop",
    "Godly –≤ –Ω–∞–ª–∏—á–∏–∏. –¶–µ–Ω–∞ –≤ –≥—Ä–Ω. Hexon_Shop",
    "–ü–æ–∫—É–ø–∞–π Godly –∑–∞ –≥—Ä–∏–≤–Ω—ã. Hexon_Shop",
    "Godly –ø–æ –Ω–∏–∑–∫–æ–π —Ü–µ–Ω–µ –≤ –≥—Ä–Ω. Hexon_Shop"
}

-- –°—Ç–∏–∫–µ—Ä—ã/—Å–º–∞–π–ª–∏–∫–∏
local stickers = {"üíé", "üî•", "üéÆ", "üí∞", "üó°Ô∏è", "‚≠ê", "üîπ", "üõí", "üéØ", "‚ö°"}

-- –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–µ—Ä–µ–º–µ—à–∏–≤–∞–Ω–∏—è
local function shuffle(tbl)
    local copy = {}
    for i, v in ipairs(tbl) do
        copy[i] = v
    end
    for i = #copy, 2, -1 do
        local j = math.random(i)
        copy[i], copy[j] = copy[j], copy[i]
    end
    return copy
end

-- –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ª—É—á–∞–π–Ω–æ–≥–æ —Å—Ç–∏–∫–µ—Ä–∞
local function getRandomSticker()
    return stickers[math.random(1, #stickers)]
end

-- –§—É–Ω–∫—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ —á–∞—Ç
local function sendMessage(text)
    -- –î–æ–±–∞–≤–ª—è–µ–º —Å—Ç–∏–∫–µ—Ä—ã
    local decoratedText = getRandomSticker() .. " " .. text .. " " .. getRandomSticker()
    
    print("–ü—ã—Ç–∞—é—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å: " .. decoratedText)
    
    -- –ü—Ä–æ–±—É–µ–º —Å—Ç–∞—Ä—ã–π —á–∞—Ç
    local success1 = pcall(function()
        local chatEvents = game:GetService("ReplicatedStorage"):FindFirstChild("DefaultChatSystemChatEvents")
        if chatEvents then
            local sayMessage = chatEvents:FindFirstChild("SayMessageRequest")
            if sayMessage then
                sayMessage:FireServer(decoratedText, "All")
                print("–û—Ç–ø—Ä–∞–≤–∏–ª —á–µ—Ä–µ–∑ —Å—Ç–∞—Ä—ã–π —á–∞—Ç")
                return true
            end
        end
        return false
    end)
    
    -- –ü—Ä–æ–±—É–µ–º –Ω–æ–≤—ã–π —á–∞—Ç
    local success2 = pcall(function()
        local textChatService = game:GetService("TextChatService")
        local rbxGeneral = textChatService:FindFirstChild("TextChannels") and 
                          textChatService.TextChannels:FindFirstChild("RBXGeneral")
        if rbxGeneral then
            rbxGeneral:SendAsync(decoratedText)
            print("–û—Ç–ø—Ä–∞–≤–∏–ª —á–µ—Ä–µ–∑ –Ω–æ–≤—ã–π —á–∞—Ç")
            return true
        end
        return false
    end)
    
    -- –ü—Ä–æ–±—É–µ–º –Ω–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ RemoteEvent –µ—Å–ª–∏ –µ—Å—Ç—å
    local success3 = pcall(function()
        game:GetService("ReplicatedStorage").DefaultChatSystemChatEvents.SayMessageRequest:FireServer(decoratedText, "All")
        print("–û—Ç–ø—Ä–∞–≤–∏–ª –Ω–∞–ø—Ä—è–º—É—é")
        return true
    end)
    
    if not (success1 or success2 or success3) then
        print("–ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ")
    end
end

-- –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —á–∞—Ç–∞
local function isChatAvailable()
    local oldChat = game:GetService("ReplicatedStorage"):FindFirstChild("DefaultChatSystemChatEvents")
    local newChat = game:GetService("TextChatService"):FindFirstChild("TextChannels")
    
    return oldChat ~= nil or newChat ~= nil
end

-- –§—É–Ω–∫—Ü–∏—è –æ–∂–∏–¥–∞–Ω–∏—è —á–∞—Ç–∞
local function waitForChat()
    local maxAttempts = 20
    local attempts = 0
    
    while attempts < maxAttempts do
        if isChatAvailable() then
            print("–ß–∞—Ç –¥–æ—Å—Ç—É–ø–µ–Ω")
            return true
        end
        attempts = attempts + 1
        task.wait(1)
    end
    
    print("–ß–∞—Ç –Ω–µ —Å—Ç–∞–ª –¥–æ—Å—Ç—É–ø–µ–Ω")
    return false
end

-- –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è
local function mainLoop()
    print("–ù–∞—á–∏–Ω–∞—é –æ—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª...")
    
    while true do
        -- –ñ–¥–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —á–∞—Ç–∞ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞—Ö–æ–¥–∞
        if waitForChat() then
            local shuffled = shuffle(messages)
            
            -- –û—Ç–ø—Ä–∞–≤–ª—è–µ–º 5 —Å–æ–æ–±—â–µ–Ω–∏–π
            for i = 1, 5 do
                sendMessage(shuffled[i])
                task.wait(math.random(3, 5)) -- —Å–ª—É—á–∞–π–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ 3-5 —Å–µ–∫—É–Ω–¥
            end
            
            -- –ü–µ—Ä–µ–∑–∞—Ö–æ–¥ –ø–æ—Å–ª–µ 5 —Å–æ–æ–±—â–µ–Ω–∏–π
            print("–û—Ç–ø—Ä–∞–≤–∏–ª 5 —Å–æ–æ–±—â–µ–Ω–∏–π, –ø–µ—Ä–µ–∑–∞—Ö–æ–∂—É...")
            task.wait(2)
            
            -- –ü—Ä–æ—Å—Ç–æ–π –ø–µ—Ä–µ–∑–∞—Ö–æ–¥
            pcall(function()
                TeleportService:Teleport(placeId)
            end)
            
            -- –ñ–¥–µ–º –Ω–µ–º–Ω–æ–≥–æ –ø–µ—Ä–µ–¥ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –ø–æ–ø—ã—Ç–∫–æ–π –µ—Å–ª–∏ –ø–µ—Ä–µ–∑–∞—Ö–æ–¥ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª
            task.wait(10)
        else
            -- –ï—Å–ª–∏ —á–∞—Ç –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, –∂–¥–µ–º –∏ –ø—Ä–æ–±—É–µ–º –ø–µ—Ä–µ–∑–∞–π—Ç–∏
            print("–ß–∞—Ç –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, –ø—Ä–æ–±—É—é –ø–µ—Ä–µ–∑–∞–π—Ç–∏...")
            task.wait(5)
            pcall(function()
                TeleportService:Teleport(placeId)
            end)
            task.wait(10)
        end
    end
end

-- –ó–∞–ø—É—Å–∫ —Å–∫—Ä–∏–ø—Ç–∞
print("=== –ê–≤—Ç–æ-—Å–ø–∞–º —Å–∫—Ä–∏–ø—Ç –∑–∞–ø—É—â–µ–Ω ===")
print("–ò–≥—Ä–æ–∫: " .. player.Name)
print("–ú–µ—Å—Ç–æ: " .. placeId)

-- –ñ–¥–µ–º –∑–∞–≥—Ä—É–∑–∫–∏ –∏–≥—Ä—ã
task.wait(5)

-- –ó–∞–ø—É—Å–∫–∞–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª
mainLoop()
